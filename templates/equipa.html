<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <title>Equipa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/daisyui@1.19.0/dist/full.js"></script>
</head>

<body
    class="text-gray-900 bg-cover bg-center bg-no-repeat min-h-screen"
    data-theme="corporate"
    style="background-image: url('/static/images/stadium2.jpg');">


<div class="container mx-auto p-6">

    <!-- TÍTULO DINÂMICO COM NOME DA EQUIPA -->
    <h1 class="text-4xl font-bold text-center text-primary mb-6 text-white">
        {{ equipa.info.nome }}
    </h1>

    <div class="text-center mb-8 text-white bg-blue-800 bg-opacity-50 p-4 rounded-lg">
        <p class="text-xl">Orçamento Disponível: <strong>{{ "%.2f"|format(equipa.info.orcamento) }}€</strong></p>
        <p class="text-lg">Pontuação Total: <strong>{{ equipa.info.pontuacao_total }}</strong></p>
    </div>

    <!-- SECÇÃO: AVANÇADOS -->
    <h2 class="text-2xl text-center mb-4 text-secondary text-white font-bold">Avançados (3)</h2>
    
    <!-- Dropdown para avançados -->
    <div class="mb-6 flex justify-center">
        <div class="dropdown dropdown-bottom">
            <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-64 max-h-60 overflow-y-auto">
                {% for avancado in todos_jogadores.Forward %}
                {% if avancado.id not in equipa.avancados|map(attribute='id') %}
                <li>
                    <a href="/equipa/adicionar/avancados/{{ avancado.id }}" 
                    class="substituir-jogador {% if avancado.preco > equipa.info.orcamento %}opacity-50 cursor-not-allowed{% endif %}">
                        <div class="flex items-center gap-3">
                            <img src="{{ avancado.jogador_imagem }}" 
                                class="w-8 h-8 rounded-full object-cover {% if avancado.preco > equipa.info.orcamento %}opacity-50{% endif %}">
                            <div class="flex-1">
                                <div class="font-bold {% if avancado.preco > equipa.info.orcamento %}text-red-500{% else %}text-white{% endif %}">
                                    {{ avancado.nome }}
                                </div>
                                <div class="font-bold text-xs text-black-500">{{ avancado.preco }}€</div>
                                {% if avancado.preco > equipa.info.orcamento %}
                                <div class="text-xs text-red-500 font-semibold">Orçamento insuficiente</div>
                                {% endif %}
                            </div>
                        </div>
                    </a>
                </li>
                {% endif %}
                {% endfor %}
            </ul>
        </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 mb-10 place-items-center" id="avancados-container">
        {% for j in equipa.avancados %}
        <div class="card bg-white shadow-xl p-4 w-64 h-32 flex items-center relative">
            <!-- Botão de remover -->
            <a href="/equipa/remover/{{ j.id }}"
                class="absolute -top-2 -right-2 flex items-center justify-center w-6 h-6 rounded-full border border-red-600 bg-white text-red-600 font-bold hover:bg-red-100">
                    ✕
            </a>
            
            <a href="/players/{{ j.id }}">
                <div class="flex items-center gap-4">
                    <img src="{{ j.jogador_imagem }}" class="w-16 h-16 rounded-full object-cover">
                    <div>
                        <div class="font-bold text-lg">{{ j.nome }}</div>
                        <div class="badge badge-primary badge-outline">{{ j.posicao }}</div>
                        <div class="text-sm text-gray-500">{{ j.preco }}€</div>
                    </div>
                </div>
            </a>
        </div>
        {% endfor %}
    </div>

    <!-- SECÇÃO: MÉDIOS -->
    <h2 class="text-2xl text-center mb-4 text-secondary text-white font-bold">Médios (5)</h2>
    
    <!-- Dropdown para médios -->
    <div class="mb-6 flex justify-center">
        <div class="dropdown dropdown-bottom">
            <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-64 max-h-60 overflow-y-auto">
                {% for medio in todos_jogadores.Midfielder %}
                {% if medio.id not in equipa.medios|map(attribute='id') %}
                <li>
                    <a href="/equipa/adicionar/medios/{{ medio.id }}" 
                    class="substituir-jogador {% if medio.preco > equipa.info.orcamento %}opacity-50 cursor-not-allowed{% endif %}">
                        <div class="flex items-center gap-3">
                            <img src="{{ medio.jogador_imagem }}" 
                                class="w-8 h-8 rounded-full object-cover {% if medio.preco > equipa.info.orcamento %}opacity-50{% endif %}">
                            <div class="flex-1">
                                <div class="font-bold {% if medio.preco > equipa.info.orcamento %}text-red-500{% else %}text-white{% endif %}">
                                    {{ medio.nome }}
                                </div>
                                <div class="font-bold text-xs text-black-500">{{ medio.preco }}€</div>
                                {% if medio.preco > equipa.info.orcamento %}
                                <div class="text-xs text-red-500 font-semibold">Orçamento insuficiente</div>
                                {% endif %}
                            </div>
                        </div>
                    </a>
                </li>
                {% endif %}
                {% endfor %}
            </ul>
        </div>
    </div>


    <div class="grid grid-cols-1 md:grid-cols-5 gap-6 mb-10 place-items-center" id="medios-container">
        {% for j in equipa.medios %}
        <div class="card bg-white shadow-xl p-4 w-54 h-32 flex items-center relative">
            <a href="/equipa/remover/{{ j.id }}"
                class="absolute -top-2 -right-2 flex items-center justify-center w-6 h-6 rounded-full border border-red-600 bg-white text-red-600 font-bold hover:bg-red-100">
                    ✕
            </a>
            
            <a href="/players/{{ j.id }}">
                <div class="flex items-center gap-4">
                    <img src="{{ j.jogador_imagem }}" class="w-16 h-16 rounded-full object-cover">
                    <div>
                        <div class="font-bold text-lg">{{ j.nome }}</div>
                        <div class="badge badge-primary badge-outline">{{ j.posicao }}</div>
                        <div class="text-sm text-gray-500">{{ j.preco }}€</div>
                    </div>
                </div>
            </a>
        </div>
        {% endfor %}
    </div>

    <!-- SECÇÃO: DEFESAS -->
    <h2 class="text-2xl text-center mb-4 text-secondary text-white font-bold">Defesas (5)</h2>
    
    <!-- Dropdown para defesas -->
    <div class="mb-6 flex justify-center">
        <div class="dropdown dropdown-bottom">
            <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-64 max-h-60 overflow-y-auto">
                {% for defesa in todos_jogadores.Defender %}
                {% if defesa.id not in equipa.defesas|map(attribute='id') %}
                <li>
                    <a href="/equipa/adicionar/defesas/{{ defesa.id }}" 
                    class="substituir-jogador {% if defesa.preco > equipa.info.orcamento %}opacity-50 cursor-not-allowed{% endif %}">
                        <div class="flex items-center gap-3">
                            <img src="{{ defesa.jogador_imagem }}" 
                                class="w-8 h-8 rounded-full object-cover {% if defesa.preco > equipa.info.orcamento %}opacity-50{% endif %}">
                            <div class="flex-1">
                                <div class="font-bold {% if defesa.preco > equipa.info.orcamento %}text-red-500{% else %}text-white{% endif %}">
                                    {{ defesa.nome }}
                                </div>
                                <div class="font-bold text-xs text-black-500">{{ defesa.preco }}€</div>
                                {% if defesa.preco > equipa.info.orcamento %}
                                <div class="text-xs text-red-500 font-semibold">Orçamento insuficiente</div>
                                {% endif %}
                            </div>
                        </div>
                    </a>
                </li>
                {% endif %}
                {% endfor %}
            </ul>
        </div>
    </div>


    <div class="grid grid-cols-1 md:grid-cols-5 gap-6 mb-10 place-items-center" id="defesas-container">
        {% for j in equipa.defesas %}
        <div class="card bg-white shadow-xl p-4 w-54 h-32 flex items-center relative">
            <a href="/equipa/remover/{{ j.id }}"
                class="absolute -top-2 -right-2 flex items-center justify-center w-6 h-6 rounded-full border border-red-600 bg-white text-red-600 font-bold hover:bg-red-100">
                    ✕
            </a>
            
            <a href="/players/{{ j.id }}">
                <div class="flex items-center gap-4">
                    <img src="{{ j.jogador_imagem }}" class="w-16 h-16 rounded-full object-cover">
                    <div>
                        <div class="font-bold text-lg">{{ j.nome }}</div>
                        <div class="badge badge-primary badge-outline">{{ j.posicao }}</div>
                        <div class="text-sm text-gray-500">{{ j.preco }}€</div>
                    </div>
                </div>
            </a>
        </div>
        {% endfor %}
    </div>

    <!-- SECÇÃO: GUARDA-REDES -->
    <h2 class="text-2xl text-center mb-4 text-secondary text-white font-bold">Guarda-Redes (2)</h2>
    
    <!-- Dropdown para guarda-redes -->
    <div class="mb-6 flex justify-center">
        <div class="dropdown dropdown-bottom">
            <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-64 max-h-60 overflow-y-auto">
                {% for gr in todos_jogadores.Goalkeeper %}
                {% if gr.id not in equipa.gr|map(attribute='id') %}
                <li>
                    <a href="/equipa/adicionar/gr/{{ gr.id }}" 
                    class="substituir-jogador {% if gr.preco > equipa.info.orcamento %}opacity-50 cursor-not-allowed{% endif %}">
                        <div class="flex items-center gap-3">
                            <img src="{{ gr.jogador_imagem }}" 
                                class="w-8 h-8 rounded-full object-cover {% if gr.preco > equipa.info.orcamento %}opacity-50{% endif %}">
                            <div class="flex-1">
                                <div class="font-bold {% if gr.preco > equipa.info.orcamento %}text-red-500{% else %}text-white{% endif %}">
                                    {{ gr.nome }}
                                </div>
                                <div class="font-bold text-xs text-black-500">{{ gr.preco }}€</div>
                                {% if gr.preco > equipa.info.orcamento %}
                                <div class="text-xs text-red-500 font-semibold">Orçamento insuficiente</div>
                                {% endif %}
                            </div>
                        </div>
                    </a>
                </li>
                {% endif %}
                {% endfor %}
            </ul>
        </div>
    </div>


    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-10 place-items-center" id="gr-container">
        {% for j in equipa.gr %}
        <div class="card bg-white shadow-xl p-4 w-64 h-32 flex items-center relative">
            <a href="/equipa/remover/{{ j.id }}"
                class="absolute -top-2 -right-2 flex items-center justify-center w-6 h-6 rounded-full border border-red-600 bg-white text-red-600 font-bold hover:bg-red-100">
                    ✕
            </a>
            
            <a href="/players/{{ j.id }}">
                <div class="flex items-center gap-4">
                    <img src="{{ j.jogador_imagem }}" class="w-16 h-16 rounded-full object-cover">
                    <div>
                        <div class="font-bold text-lg">{{ j.nome }}</div>
                        <div class="badge badge-primary badge-outline">{{ j.posicao }}</div>
                        <div class="text-sm text-gray-500">{{ j.preco }}€</div>
                    </div>
                </div>
            </a>
        </div>
        {% endfor %}
    </div>

    <div class="mt-12 text-center">
        <a href="/index"
        class="btn px-8"
        style="background-color: white; color: black; border: 1px solid #ccc;">
        ← Voltar
        </a>
    </div>

</div>

</body>
</html>